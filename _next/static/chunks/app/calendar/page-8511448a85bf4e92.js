(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{709:(e,t,r)=>{Promise.resolve().then(r.bind(r,4780))},4780:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var a=r(5155),s=r(9576),o=r(5695),n=r(9824),l=r(2115),i=r(4616),d=r(9074),c=r(4653),b=r(2355),g=r(3052),u=r(8061),m=r(9137),x=r.n(m),h=r(4416),p=r(3332),f=r(4186),y=r(4516);let j=[{value:"course",label:"Cours",color:"bg-blue-500",lightColor:"bg-blue-50",textColor:"text-blue-700",dotColor:"bg-blue-500"},{value:"practical",label:"TP",color:"bg-green-500",lightColor:"bg-green-50",textColor:"text-green-700",dotColor:"bg-green-500"},{value:"exam",label:"Contr\xf4le",color:"bg-red-500",lightColor:"bg-red-50",textColor:"text-red-700",dotColor:"bg-red-500"},{value:"project",label:"Projet",color:"bg-teal-500",lightColor:"bg-teal-50",textColor:"text-teal-700",dotColor:"bg-teal-500"},{value:"sport",label:"Sport",color:"bg-purple-500",lightColor:"bg-purple-50",textColor:"text-purple-700",dotColor:"bg-purple-500"},{value:"study",label:"R\xe9vision",color:"bg-amber-500",lightColor:"bg-amber-50",textColor:"text-amber-700",dotColor:"bg-amber-500"}];function v(e){let{isOpen:t,onClose:r,onSubmit:s,selectedDate:o}=e;(0,l.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);let[n,i]=(0,l.useState)({title:"",description:"",type:"course",startTime:"08:00",endTime:"09:00",location:""}),[c,b]=(0,l.useState)({}),g=()=>{i({title:"",description:"",type:"course",startTime:"08:00",endTime:"09:00",location:""}),b({}),r()};return t?(0,a.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/20 flex items-center justify-center z-50 p-4",onClick:g,children:(0,a.jsx)("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] shadow-xl border border-gray-200 relative",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{style:{scrollbarWidth:"none",msOverflowStyle:"none"},className:"jsx-f07ba6fb022e41c2 max-h-[90vh] overflow-y-auto scrollbar-hide",children:[(0,a.jsx)(x(),{id:"f07ba6fb022e41c2",children:".scrollbar-hide.jsx-f07ba6fb022e41c2::-webkit-scrollbar{display:none}"}),(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2 flex items-center justify-between p-6 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2",children:[(0,a.jsx)("h2",{className:"jsx-f07ba6fb022e41c2 text-xl font-semibold text-gray-900",children:"Cr\xe9er un \xe9v\xe9nement"}),o&&(0,a.jsx)("p",{className:"jsx-f07ba6fb022e41c2 text-sm text-gray-500 mt-1",children:o.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsx)("button",{onClick:g,className:"jsx-f07ba6fb022e41c2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{let e={};return n.title.trim()||(e.title="Le titre est obligatoire"),n.startTime||(e.startTime="L'heure de d\xe9but est obligatoire"),n.endTime||(e.endTime="L'heure de fin est obligatoire"),n.startTime&&n.endTime&&n.startTime>=n.endTime&&(e.endTime="L'heure de fin doit \xeatre apr\xe8s l'heure de d\xe9but"),b(e),0===Object.keys(e).length})()&&(s(n),g())},className:"jsx-f07ba6fb022e41c2 p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2",children:[(0,a.jsxs)("label",{className:"jsx-f07ba6fb022e41c2 block text-sm font-semibold text-gray-900 mb-2",children:[(0,a.jsx)(p.A,{className:"inline h-4 w-4 mr-1 text-blue-600"}),"Titre de l’\xe9v\xe9nement *"]}),(0,a.jsx)("input",{type:"text",value:n.title,onChange:e=>i({...n,title:e.target.value}),placeholder:"Ex: Cours de Math\xe9matiques",style:{color:"#1f2937"},className:"jsx-f07ba6fb022e41c2 "+"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ".concat(c.title?"border-red-500":"border-gray-300")}),c.title&&(0,a.jsx)("p",{className:"jsx-f07ba6fb022e41c2 text-red-500 text-sm mt-2 font-medium",children:c.title})]}),(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2",children:[(0,a.jsx)("label",{className:"jsx-f07ba6fb022e41c2 block text-sm font-semibold text-gray-900 mb-2",children:"Type d’\xe9v\xe9nement"}),(0,a.jsx)("div",{className:"jsx-f07ba6fb022e41c2 grid grid-cols-2 md:grid-cols-3 gap-4",children:j.map(e=>{let t=n.type===e.value;return(0,a.jsxs)("button",{type:"button",onClick:()=>i({...n,type:e.value}),className:"jsx-f07ba6fb022e41c2 "+"p-4 border-2 rounded-2xl transition-all duration-150 hover:scale-[1.05] hover:shadow-lg flex items-center space-x-3 relative overflow-hidden ".concat(t?"border-gray-300 ".concat(e.lightColor," ").concat(e.textColor," shadow-lg transform scale-[1.02]"):"border-gray-200 hover:border-gray-300 bg-white/50 text-gray-700"),children:[t&&(0,a.jsx)("div",{className:"jsx-f07ba6fb022e41c2 absolute inset-0 bg-gradient-to-r from-white/20 to-transparent"}),(0,a.jsx)("div",{className:"jsx-f07ba6fb022e41c2 "+"w-4 h-4 rounded-full ".concat(e.dotColor," shadow-sm relative z-10")}),(0,a.jsx)("span",{className:"jsx-f07ba6fb022e41c2 text-sm font-bold relative z-10",children:e.label})]},e.value)})})]}),(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2 grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2",children:[(0,a.jsxs)("label",{className:"jsx-f07ba6fb022e41c2 block text-sm font-bold text-gray-800 mb-3",children:[(0,a.jsx)(f.A,{className:"inline h-4 w-4 mr-2 text-gray-600"}),"Heure de d\xe9but *"]}),(0,a.jsx)("input",{type:"time",value:n.startTime,onChange:e=>i({...n,startTime:e.target.value}),style:{color:"#1f2937"},className:"jsx-f07ba6fb022e41c2 "+"w-full px-5 py-4 border-2 bg-white rounded-2xl focus:ring-2 focus:ring-gray-200 focus:border-gray-400 transition-all duration-150 hover:shadow-md ".concat(c.startTime?"border-red-400 focus:ring-red-100":"border-gray-200 hover:border-gray-300")}),c.startTime&&(0,a.jsx)("p",{className:"jsx-f07ba6fb022e41c2 text-red-500 text-sm mt-2 font-medium",children:c.startTime})]}),(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2",children:[(0,a.jsxs)("label",{className:"jsx-f07ba6fb022e41c2 block text-sm font-bold text-gray-800 mb-3",children:[(0,a.jsx)(f.A,{className:"inline h-4 w-4 mr-2 text-gray-600"}),"Heure de fin *"]}),(0,a.jsx)("input",{type:"time",value:n.endTime,onChange:e=>i({...n,endTime:e.target.value}),style:{color:"#1f2937"},className:"jsx-f07ba6fb022e41c2 "+"w-full px-5 py-4 border-2 bg-white rounded-2xl focus:ring-2 focus:ring-gray-200 focus:border-gray-400 transition-all duration-150 hover:shadow-md ".concat(c.endTime?"border-red-400 focus:ring-red-100":"border-gray-200 hover:border-gray-300")}),c.endTime&&(0,a.jsx)("p",{className:"jsx-f07ba6fb022e41c2 text-red-500 text-sm mt-2 font-medium",children:c.endTime})]})]}),(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2",children:[(0,a.jsxs)("label",{className:"jsx-f07ba6fb022e41c2 block text-sm font-bold text-gray-800 mb-3",children:[(0,a.jsx)(y.A,{className:"inline h-4 w-4 mr-2 text-gray-600"}),"Lieu (optionnel)"]}),(0,a.jsx)("input",{type:"text",value:n.location,onChange:e=>i({...n,location:e.target.value}),placeholder:"Ex: Salle 201",style:{color:"#1f2937"},className:"jsx-f07ba6fb022e41c2 w-full px-5 py-4 border-2 border-gray-200 bg-white rounded-2xl focus:ring-2 focus:ring-gray-200 focus:border-gray-400 transition-all duration-150 hover:shadow-md hover:border-gray-300"})]}),(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2",children:[(0,a.jsx)("label",{className:"jsx-f07ba6fb022e41c2 block text-sm font-bold text-gray-800 mb-3",children:"Description (optionnel)"}),(0,a.jsx)("textarea",{value:n.description,onChange:e=>i({...n,description:e.target.value}),rows:4,placeholder:"Ajoutez des d\xe9tails sur cet \xe9v\xe9nement...",style:{color:"#1f2937"},className:"jsx-f07ba6fb022e41c2 w-full px-5 py-4 border-2 border-gray-200 bg-white rounded-2xl focus:ring-2 focus:ring-gray-200 focus:border-gray-400 transition-all duration-150 hover:shadow-md hover:border-gray-300 resize-none"})]}),(0,a.jsxs)("div",{className:"jsx-f07ba6fb022e41c2 flex justify-end space-x-4 pt-6 border-t border-gradient-to-r from-indigo-200 to-purple-200",children:[(0,a.jsx)("button",{type:"button",onClick:g,className:"jsx-f07ba6fb022e41c2 px-8 py-3 text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 hover:scale-[1.05] rounded-2xl font-bold transition-all duration-300 hover:shadow-lg",children:"Annuler"}),(0,a.jsxs)("button",{type:"submit",className:"jsx-f07ba6fb022e41c2 px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 hover:scale-[1.05] text-white rounded-2xl font-bold transition-all duration-300 flex items-center space-x-2 shadow-lg hover:shadow-xl",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"jsx-f07ba6fb022e41c2",children:"Cr\xe9er l’\xe9v\xe9nement"})]})]})]})]})})}):null}let w={course:"Cours",practical:"TP",exam:"Contr\xf4le",project:"Projet",sport:"Sport",study:"R\xe9vision"},N={course:"text-blue-600 bg-blue-50",practical:"text-green-600 bg-green-50",exam:"text-red-600 bg-red-50",project:"text-teal-600 bg-teal-50",sport:"text-purple-600 bg-purple-50",study:"text-amber-600 bg-amber-50"};function k(e){let{isOpen:t,onClose:r,event:s}=e;if((0,l.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t||!s)return null;let o=e=>e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return(0,a.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/20 flex items-center justify-center z-50 p-4",onClick:r,children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-xl border border-gray-200",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.A,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"D\xe9tails de l’\xe9v\xe9nement"})]}),(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:s.title}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(N[s.type]||"text-gray-600 bg-gray-50"),children:[(0,a.jsx)(p.A,{className:"h-3 w-3 mr-1"}),w[s.type]||s.type]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-medium text-blue-900",children:s.startTime.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"font-medium text-green-900",children:[o(s.startTime)," - ",o(s.endTime)]})})]})]}),s.location&&(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[(0,a.jsx)(y.A,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("p",{className:"font-medium text-purple-900",children:s.location})]}),s.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:s.description})]})]})]})})}var D=r(7709);function T(e){let{userRole:t,events:r,initialDate:s}=e,[o,n]=(0,l.useState)(s||new Date),[i]=(0,l.useState)("personal"===t?"tasks":"all");(0,l.useEffect)(()=>{s&&n(s)},[s]);let c=(e=>{let t=[],r=new Date(e),a=r.getDay(),s=r.getDate()-a+(0===a?-6:1);r.setDate(s);for(let e=0;e<7;e++){let a=new Date(r);a.setDate(r.getDate()+e),t.push(a)}return t})(o),b=c[0],g=c[6],u=r.filter(e=>{let t=new Date(e.startTime);return t>=b&&t<=g}).map(e=>{let t=(0,D.O6)(e.type,void 0,e.title);return{id:e.id,title:e.title,type:e.type,day:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date(e.startTime).getDay()],startTime:new Date(e.startTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),endTime:new Date(e.endTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),location:e.location,description:e.description,color:t.background,borderColor:t.border,bgColor:t.backgroundLight}}).filter(e=>{if("personal"===t)return"tasks"===i?"assignment"===e.type:"events"!==i||["course","practical","exam","project","sport","study"].includes(e.type);{let t=["course","practical","exam"];return"all"===i?t.includes(e.type):"courses"===i?["course","practical"].includes(e.type):"exams"===i?"exam"===e.type:t.includes(e.type)}}).reduce((e,t)=>(e[t.day]||(e[t.day]=[]),e[t.day].push(t),e),{});Object.keys(u).forEach(e=>{u[e].sort((e,t)=>{let r=e.startTime||"00:00",a=t.startTime||"00:00";return r.localeCompare(a)})});let m=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-7 gap-4",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map((e,t)=>{let r=u[e]||[],s=c[t],o=s.toDateString()===new Date().toDateString(),n="saturday"===e||"sunday"===e;return(0,a.jsxs)("div",{className:"".concat(n?"opacity-60":""," rounded-xl"),children:[(0,a.jsxs)("div",{className:"text-center mb-4 pb-3 border-b border-gray-200",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 mb-2",children:m[t]}),(0,a.jsx)("div",{className:"text-2xl font-bold w-10 h-10 mx-auto rounded-full flex items-center justify-center transition-colors ".concat(o?"bg-blue-500 text-white shadow-md":"text-gray-600 bg-gray-100 hover:bg-gray-200"),children:s.getDate()})]}),(0,a.jsx)("div",{className:"space-y-3 min-h-[200px]",children:0===r.length?(0,a.jsxs)("div",{className:"p-4 text-center text-gray-500 bg-gray-50 rounded-xl",children:[(0,a.jsx)(d.A,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),(0,a.jsx)("p",{className:"text-xs",children:"Libre"})]}):r.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.bgColor," border border-gray-200 hover:shadow-md transition-shadow"),children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("h4",{className:"font-medium text-xs text-gray-900 leading-tight",children:e.title})}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.startTime," - ",e.endTime]})]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(y.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate",children:e.location})]})]})]},e.id))})]},e)})})})})}function C(){let{user:e}=(0,s.A)(),{events:t,createEvent:r}=(0,u.K)((null==e?void 0:e.id)||""),[o,n]=(0,l.useState)(new Date),[m,x]=(0,l.useState)(null),[h,p]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[j,w]=(0,l.useState)(null),[N,C]=(0,l.useState)("calendar"),L=e=>{let r=e.toISOString().split("T")[0];return t.filter(e=>new Date(e.startTime).toISOString().split("T")[0]===r).map(e=>{let t;return{id:e.id,title:e.title,time:new Date(e.startTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),type:e.type,color:(t=e.type,(0,D.XA)(t)),location:e.location}})},S=e=>{"calendar"===N?n(t=>{let r=new Date(t);return r.setMonth(t.getMonth()+("next"===e?1:-1)),r}):n(t=>{let r=new Date(t);return r.setDate(t.getDate()+("next"===e?7:-7)),r})},A=async t=>{if(!m||!e)return;let a=new Date(m),[s,o]=t.startTime.split(":");a.setHours(parseInt(s),parseInt(o));let n=new Date(m),[l,i]=t.endTime.split(":");n.setHours(parseInt(l),parseInt(i)),await r({title:t.title,description:t.description,type:t.type,startTime:a,endTime:n,location:t.location})},E=()=>{m||x(new Date),p(!0)},M=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],O=(e=>{let t=e.getFullYear(),r=e.getMonth(),a=new Date(t,r,1),s=new Date(t,r+1,0).getDate(),o=(a.getDay()+6)%7,n=[],l=new Date(t,r-1,0).getDate();for(let e=o-1;e>=0;e--)n.push({date:new Date(t,r-1,l-e),isCurrentMonth:!1});for(let e=1;e<=s;e++)n.push({date:new Date(t,r,e),isCurrentMonth:!0});let i=1;for(;n.length<42;)n.push({date:new Date(t,r+1,i),isCurrentMonth:!1}),i++;return n})(o),P=new Date,F=m?L(m):[];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"calendar"===N?"".concat(M[o.getMonth()]," ").concat(o.getFullYear()):"Planning Hebdomadaire"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-xl transition-colors flex items-center space-x-2 shadow-sm",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Ajouter"})]}),(0,a.jsxs)("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[(0,a.jsxs)("button",{onClick:()=>C("calendar"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1 ".concat("calendar"===N?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Calendrier"})]}),(0,a.jsxs)("button",{onClick:()=>C("planning"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center space-x-1 ".concat("planning"===N?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Planning"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>S("prev"),className:"p-3 rounded-xl transition-colors hover:bg-gray-100 text-gray-600",children:(0,a.jsx)(b.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>n(new Date),className:"px-4 py-2 text-sm rounded-xl transition-colors bg-blue-50 text-blue-600 hover:bg-blue-100",children:"Aujourd'hui"}),(0,a.jsx)("button",{onClick:()=>S("next"),className:"p-3 rounded-xl transition-colors hover:bg-gray-100 text-gray-600",children:(0,a.jsx)(g.A,{className:"h-5 w-5"})})]})]})]}),(0,a.jsx)("div",{className:"transition-all duration-300",children:"calendar"===N?(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(e=>(0,a.jsx)("div",{className:"p-4 text-center text-base font-medium text-gray-500",children:e},e)),O.map((e,t)=>{let r=e.date,s=e.isCurrentMonth,o=r.toDateString()===P.toDateString(),l=m&&r.toDateString()===m.toDateString(),i=L(r).length>0,d=L(r);return(0,a.jsxs)("button",{onClick:()=>{s||n(new Date(r.getFullYear(),r.getMonth(),1)),x(r)},className:"group p-3 h-28 border transition-all duration-200 ease-out relative rounded-xl transform hover:scale-[1.02] active:scale-[0.98] ".concat(l?"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-300 ring-2 ring-blue-400/50 shadow-lg shadow-blue-200/30":o?"bg-gradient-to-br from-blue-600 to-blue-700 border-blue-700 shadow-lg shadow-blue-500/30":s?"bg-white border-gray-200 hover:bg-gray-50 hover:border-gray-300 hover:shadow-md":"bg-gray-50/50 border-gray-200/50 hover:bg-gray-100/70"),children:[(0,a.jsx)("div",{className:"text-base font-bold transition-colors duration-200 ".concat(l?"text-blue-800":o?"text-white":s?"text-gray-900 group-hover:text-gray-700":"text-gray-500"),children:r.getDate()}),i&&s&&d.length>0&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)("div",{className:"w-5 h-5 rounded-full text-xs font-semibold flex items-center justify-center transition-all duration-200 ".concat(l?"bg-blue-600 text-white":o?"bg-white text-blue-600":"bg-blue-100 text-blue-600 group-hover:bg-blue-200"),children:d.length})}),i&&s&&(0,a.jsx)("div",{className:"absolute bottom-2 left-2 right-2",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-1",children:[d.slice(0,3).map(e=>(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color," shadow-sm border-2 border-white transition-transform duration-200 group-hover:scale-110"),title:e.title},e.id)),d.length>3&&(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-gray-400 shadow-sm border-2 border-white transition-transform duration-200 group-hover:scale-110",title:"+".concat(d.length-3," autres \xe9v\xe9nements")})]})}),l&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-blue-400/20 to-blue-600/20 pointer-events-none",children:(0,a.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-400/50 to-blue-600/50 rounded-xl blur-sm"})})]},"".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate(),"-").concat(t))})]}):(0,a.jsx)("div",{children:(0,a.jsx)(T,{userRole:(null==e?void 0:e.role)||"student",events:t,initialDate:o})})})]}),"calendar"===N&&m&&F.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 animate-in slide-in-from-bottom-4 duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["\xc9v\xe9nements du ",m.getDate()," ",M[m.getMonth()]]}),(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full",children:F.length})]}),(0,a.jsx)("div",{className:"space-y-3",children:F.map((e,r)=>(0,a.jsxs)("button",{onClick:()=>(e=>{let r=t.find(t=>t.id===e.id);r&&(w(r),y(!0))})(e),className:"group w-full flex items-center space-x-4 p-4 bg-gradient-to-r from-gray-50 to-gray-50/50 hover:from-blue-50 hover:to-blue-100/30 rounded-xl transition-all duration-200 text-left transform hover:scale-[1.01] hover:shadow-md border border-transparent hover:border-blue-200",style:{animationDelay:"".concat(50*r,"ms")},children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(e.color," shadow-sm group-hover:scale-110 transition-transform duration-200 flex-shrink-0")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-900 group-hover:text-blue-900 transition-colors duration-200 truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 group-hover:text-blue-600 transition-colors duration-200",children:[(0,a.jsx)("span",{className:"font-medium",children:e.time}),e.location&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)("span",{className:"truncate",children:e.location})]})]})]}),(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},e.id))})]}),"calendar"===N&&m&&0===F.length&&(0,a.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 animate-in slide-in-from-bottom-4 duration-300",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun \xe9v\xe9nement pr\xe9vu"}),(0,a.jsxs)("p",{className:"text-gray-500 mb-4",children:["Le ",m.getDate()," ",M[m.getMonth()]," est libre"]}),(0,a.jsxs)("button",{onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-xl transition-colors flex items-center space-x-2 mx-auto",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Ajouter un \xe9v\xe9nement"})]})]})}),(0,a.jsx)(v,{isOpen:h,onClose:()=>p(!1),onSubmit:A,selectedDate:m||void 0}),(0,a.jsx)(k,{isOpen:f,onClose:()=>y(!1),event:j})]})}function L(){let{user:e,logout:t}=(0,s.A)();return e||(0,o.redirect)("/"),(0,a.jsx)(n.A,{user:e,onLogout:t,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"admin"===e.role?"Supervision des plannings":"personal"===e.role?"Mon calendrier personnel":"Mon calendrier"}),(0,a.jsx)("p",{className:"text-gray-600",children:"admin"===e.role?"G\xe9rez et supervisez les plannings":"personal"===e.role?"Organisez vos \xe9v\xe9nements et activit\xe9s personnelles":"Visualisez vos \xe9v\xe9nements et rendez-vous"})]})})}),"student"===e.role||"personal"===e.role?(0,a.jsx)(C,{}):(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Supervisez l'activit\xe9 des plannings utilisateurs."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Fonctionnalit\xe9s pr\xe9vues : statistiques d'usage, mod\xe9ration des contenus..."})]})})]})})}},7709:(e,t,r)=>{"use strict";r.d(t,{$f:()=>i,Fg:()=>n,Ho:()=>l,O6:()=>d,XA:()=>c});let a={course:{background:"bg-blue-700",backgroundLight:"bg-blue-200",border:"border-l-blue-700",borderLight:"border-l-blue-500",text:"text-blue-700",ring:"ring-blue-500"},practical:{background:"bg-emerald-700",backgroundLight:"bg-emerald-200",border:"border-l-emerald-700",borderLight:"border-l-emerald-500",text:"text-emerald-700",ring:"ring-emerald-500"},exam:{background:"bg-rose-600",backgroundLight:"bg-rose-100",border:"border-l-rose-600",borderLight:"border-l-rose-400",text:"text-rose-600",ring:"ring-rose-400"},project:{background:"bg-teal-700",backgroundLight:"bg-teal-200",border:"border-l-teal-700",borderLight:"border-l-teal-500",text:"text-teal-700",ring:"ring-teal-500"},sport:{background:"bg-indigo-700",backgroundLight:"bg-indigo-200",border:"border-l-indigo-700",borderLight:"border-l-indigo-500",text:"text-indigo-700",ring:"ring-indigo-500"},study:{background:"bg-purple-700",backgroundLight:"bg-purple-200",border:"border-l-purple-700",borderLight:"border-l-purple-500",text:"text-purple-700",ring:"ring-purple-500"}},s={high:{background:"bg-rose-600",backgroundLight:"bg-rose-100",border:"border-l-rose-600",borderLight:"border-l-rose-400",text:"text-rose-600",ring:"ring-rose-400"},medium:{background:"bg-orange-600",backgroundLight:"bg-orange-100",border:"border-l-orange-600",borderLight:"border-l-orange-400",text:"text-orange-600",ring:"ring-orange-400"},low:{background:"bg-emerald-700",backgroundLight:"bg-emerald-200",border:"border-l-emerald-700",borderLight:"border-l-emerald-500",text:"text-emerald-700",ring:"ring-emerald-500"}},o={Mathématiques:{background:"bg-blue-700",backgroundLight:"bg-blue-100",border:"border-l-blue-700",borderLight:"border-l-blue-500",text:"text-blue-700",ring:"ring-blue-500"},"Physique-Chimie":{background:"bg-indigo-700",backgroundLight:"bg-indigo-100",border:"border-l-indigo-700",borderLight:"border-l-indigo-500",text:"text-indigo-700",ring:"ring-indigo-500"},SVT:{background:"bg-emerald-700",backgroundLight:"bg-emerald-100",border:"border-l-emerald-700",borderLight:"border-l-emerald-500",text:"text-emerald-700",ring:"ring-emerald-500"},Sciences:{background:"bg-teal-700",backgroundLight:"bg-teal-100",border:"border-l-teal-700",borderLight:"border-l-teal-500",text:"text-teal-700",ring:"ring-teal-500"},Français:{background:"bg-purple-700",backgroundLight:"bg-purple-100",border:"border-l-purple-700",borderLight:"border-l-purple-500",text:"text-purple-700",ring:"ring-purple-500"},Anglais:{background:"bg-rose-600",backgroundLight:"bg-rose-100",border:"border-l-rose-600",borderLight:"border-l-rose-400",text:"text-rose-600",ring:"ring-rose-400"},Espagnol:{background:"bg-red-600",backgroundLight:"bg-red-100",border:"border-l-red-600",borderLight:"border-l-red-400",text:"text-red-600",ring:"ring-red-400"},Allemand:{background:"bg-slate-700",backgroundLight:"bg-slate-100",border:"border-l-slate-700",borderLight:"border-l-slate-500",text:"text-slate-700",ring:"ring-slate-500"},"Histoire-G\xe9ographie":{background:"bg-amber-700",backgroundLight:"bg-amber-100",border:"border-l-amber-700",borderLight:"border-l-amber-500",text:"text-amber-700",ring:"ring-amber-500"},Histoire:{background:"bg-yellow-700",backgroundLight:"bg-yellow-100",border:"border-l-yellow-700",borderLight:"border-l-yellow-500",text:"text-yellow-700",ring:"ring-yellow-500"},Géographie:{background:"bg-lime-700",backgroundLight:"bg-lime-100",border:"border-l-lime-700",borderLight:"border-l-lime-500",text:"text-lime-700",ring:"ring-lime-500"},Philosophie:{background:"bg-violet-700",backgroundLight:"bg-violet-100",border:"border-l-violet-700",borderLight:"border-l-violet-500",text:"text-violet-700",ring:"ring-violet-500"},EPS:{background:"bg-green-700",backgroundLight:"bg-green-100",border:"border-l-green-700",borderLight:"border-l-green-500",text:"text-green-700",ring:"ring-green-500"},"Arts plastiques":{background:"bg-pink-600",backgroundLight:"bg-pink-100",border:"border-l-pink-600",borderLight:"border-l-pink-400",text:"text-pink-600",ring:"ring-pink-400"},Musique:{background:"bg-fuchsia-600",backgroundLight:"bg-fuchsia-100",border:"border-l-fuchsia-600",borderLight:"border-l-fuchsia-400",text:"text-fuchsia-600",ring:"ring-fuchsia-400"},Technologie:{background:"bg-gray-700",backgroundLight:"bg-gray-100",border:"border-l-gray-700",borderLight:"border-l-gray-500",text:"text-gray-700",ring:"ring-gray-500"},Économie:{background:"bg-cyan-700",backgroundLight:"bg-cyan-100",border:"border-l-cyan-700",borderLight:"border-l-cyan-500",text:"text-cyan-700",ring:"ring-cyan-500"},Informatique:{background:"bg-sky-700",backgroundLight:"bg-sky-100",border:"border-l-sky-700",borderLight:"border-l-sky-500",text:"text-sky-700",ring:"ring-sky-500"}},n=e=>a[e]||a.course,l=e=>s[e]||s.medium,i=e=>o[e]||a.course,d=(e,t,r)=>"assignment"===e&&t?l(t):"exam"===e?n(e):("course"===e||"practical"===e)&&r?i(r):n(e),c=e=>n(e).background},8061:(e,t,r)=>{"use strict";r.d(t,{K:()=>s});var a=r(2115);function s(e){let[t,r]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[n,l]=(0,a.useState)(!0),[i,d]=(0,a.useState)(!1),[c,b]=(0,a.useState)(!0),[g,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),h=(0,a.useCallback)(async()=>{if(e)try{l(!0),x(null);let[t,a]=await Promise.all([fetch("/api/events?userId=".concat(e)),fetch("/api/assignments?userId=".concat(e))]),s=await t.json(),n=await a.json();if(s.success){let e=s.events.map(e=>({...e,startTime:new Date(e.startTime),endTime:new Date(e.endTime),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));o(e)}if(n.success){let e=n.assignments.map(e=>({...e,dueDate:new Date(e.dueDate),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));r(e)}b(!0)}catch(e){x(e instanceof Error?e.message:"Erreur lors du chargement des donn\xe9es"),b(!1)}finally{l(!1)}},[e]),p=(0,a.useCallback)(async()=>{if(!i)try{d(!0),x(null),await new Promise(e=>setTimeout(e,1e3)),u(new Date),b(!0),console.log("✅ Synchronisation simul\xe9e r\xe9ussie")}catch(e){x(e instanceof Error?e.message:"Erreur de synchronisation"),b(!1)}finally{d(!1)}},[i]),f=(0,a.useCallback)(async t=>{if(e)try{var a;let s=await fetch("/api/assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,userId:e,dueDate:null==(a=t.dueDate)?void 0:a.toISOString()})}),o=await s.json();if(o.success){let e={...o.assignment,dueDate:new Date(o.assignment.dueDate),createdAt:new Date(o.assignment.createdAt),updatedAt:new Date(o.assignment.updatedAt)};r(t=>[...t,e]),console.log("\uD83D\uDCDD Nouveau devoir cr\xe9\xe9:",e.title)}else throw Error(o.error)}catch(e){x(e instanceof Error?e.message:"Erreur cr\xe9ation devoir")}},[e]),y=(0,a.useCallback)(async e=>{try{let t=await fetch("/api/assignments/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,dueDate:e.dueDate.toISOString()})}),a=await t.json();if(a.success){let t={...a.assignment,dueDate:new Date(a.assignment.dueDate),createdAt:new Date(a.assignment.createdAt),updatedAt:new Date(a.assignment.updatedAt)};r(r=>r.map(r=>r.id===e.id?t:r)),console.log("✏️ Devoir mis \xe0 jour:",e.title)}else throw Error(a.error)}catch(e){x(e instanceof Error?e.message:"Erreur mise \xe0 jour devoir")}},[]),j=(0,a.useCallback)(async e=>{try{let t=await fetch("/api/assignments/".concat(e),{method:"DELETE"}),a=await t.json();if(a.success)r(t=>t.filter(t=>t.id!==e)),console.log("\uD83D\uDDD1️ Devoir supprim\xe9");else throw Error(a.error)}catch(e){x(e instanceof Error?e.message:"Erreur suppression devoir")}},[]),v=(0,a.useCallback)(async t=>{if(e)try{var r,a;let s=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,userId:e,startTime:null==(r=t.startTime)?void 0:r.toISOString(),endTime:null==(a=t.endTime)?void 0:a.toISOString()})}),n=await s.json();if(n.success){let e={...n.event,startTime:new Date(n.event.startTime),endTime:new Date(n.event.endTime),createdAt:new Date(n.event.createdAt),updatedAt:new Date(n.event.updatedAt)};o(t=>[...t,e]),console.log("\uD83D\uDCC5 Nouvel \xe9v\xe9nement cr\xe9\xe9:",e.title)}else throw Error(n.error)}catch(e){x(e instanceof Error?e.message:"Erreur cr\xe9ation \xe9v\xe9nement")}},[e]),w=(0,a.useCallback)(async e=>{try{let t=await fetch("/api/events/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,startTime:e.startTime.toISOString(),endTime:e.endTime.toISOString()})}),r=await t.json();if(r.success){let t={...r.event,startTime:new Date(r.event.startTime),endTime:new Date(r.event.endTime),createdAt:new Date(r.event.createdAt),updatedAt:new Date(r.event.updatedAt)};o(r=>r.map(r=>r.id===e.id?t:r)),console.log("\uD83D\uDCDD \xc9v\xe9nement mis \xe0 jour:",e.title)}else throw Error(r.error)}catch(e){x(e instanceof Error?e.message:"Erreur mise \xe0 jour \xe9v\xe9nement")}},[]),N=(0,a.useCallback)(async e=>{try{let t=await fetch("/api/events/".concat(e),{method:"DELETE"}),r=await t.json();if(r.success)o(t=>t.filter(t=>t.id!==e)),console.log("\uD83D\uDDD1️ \xc9v\xe9nement supprim\xe9");else throw Error(r.error)}catch(e){x(e instanceof Error?e.message:"Erreur suppression \xe9v\xe9nement")}},[]),k=(0,a.useCallback)(async()=>{await h()},[h]);return(0,a.useEffect)(()=>{h()},[h]),(0,a.useEffect)(()=>{if(c&&!i){let e=setTimeout(()=>{p()},5e3);return()=>clearTimeout(e)}},[c,i,p]),{assignments:t,events:s,loading:n,syncing:i,isOnline:c,lastSync:g,error:m,createAssignment:f,updateAssignment:y,deleteAssignment:j,createEvent:v,updateEvent:w,deleteEvent:N,syncNow:p,refreshData:k}}}},e=>{e.O(0,[898,272,824,441,964,358],()=>e(e.s=709)),_N_E=e.O()}]);