(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},3871:()=>{},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},8344:(e,t,l)=>{Promise.resolve().then(l.t.bind(l,4147,23)),Promise.resolve().then(l.t.bind(l,8489,23)),Promise.resolve().then(l.t.bind(l,347,23)),Promise.resolve().then(l.bind(l,9576)),Promise.resolve().then(l.t.bind(l,3871,23))},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},9576:(e,t,l)=>{"use strict";l.d(t,{A:()=>n,AuthProvider:()=>o});var r=l(5155),a=l(2115);let s=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[l,o]=(0,a.useState)(null),[n,i]=(0,a.useState)(!1),[u,c]=(0,a.useState)(null),[m,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[v,_]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("user");e&&o(JSON.parse(e))},[]);let b=async(e,t)=>{i(!0),c(null);try{await new Promise(e=>setTimeout(e,1e3));let l=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await l.json();if(!r.success)throw Error(r.error||"Erreur de connexion");o(r.user),localStorage.setItem("user",JSON.stringify(r.user)),d(!0);let a=Date.now();_(a),h&&clearTimeout(h);let s=setTimeout(()=>{d(!1),f(null),_(null)},4e3);f(s)}catch(e){c(e instanceof Error?e.message:"Une erreur est survenue")}finally{i(!1)}},y=async()=>{try{console.log("Initialisation d\xe9plac\xe9e c\xf4t\xe9 serveur")}catch(e){console.error("Erreur d'initialisation de la DB:",e)}};return(0,r.jsx)(s.Provider,{value:{user:l,login:b,logout:()=>{o(null),localStorage.removeItem("user"),d(!1),_(null),h&&(clearTimeout(h),f(null))},isLoading:n,error:u,showWelcome:m,hideWelcome:()=>{d(!1),_(null),h&&(clearTimeout(h),f(null))},welcomeStartTime:v,initializeDatabase:y},children:t})}function n(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[881,441,964,358],()=>e(e.s=8344)),_N_E=e.O()}]);