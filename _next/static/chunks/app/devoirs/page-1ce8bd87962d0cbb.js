(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{1852:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var s=t(5155),a=t(9576),l=t(5695),i=t(9824),n=t(2115),d=t(8061),o=t(646),c=t(5339),b=t(3109),g=t(4616),u=t(6785),x=t(9946);let m=(0,x.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var h=t(2525),p=t(7709),v=t(5040),j=t(4416),f=t(7434);let y=(0,x.A)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var w=t(9074);let N=["Math\xe9matiques","Physique-Chimie","SVT","Sciences","Fran\xe7ais","Anglais","Espagnol","Allemand","Histoire-G\xe9ographie","Histoire","G\xe9ographie","Philosophie","EPS","Arts plastiques","Musique","Technologie","\xc9conomie","Informatique"],k=[{value:"low",label:"Faible",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:"\uD83D\uDFE2"},{value:"medium",label:"Normale",color:"bg-amber-100 text-amber-700 border-amber-200",icon:"\uD83D\uDFE1"},{value:"high",label:"Urgente",color:"bg-red-100 text-red-700 border-red-200",icon:"\uD83D\uDD34"}];function D(e){let{isOpen:r,onClose:t,onSubmit:a}=e,[l,i]=(0,n.useState)({title:"",description:"",subject:"",dueDate:"",priority:"medium"}),[d,o]=(0,n.useState)(!1),[c,b]=(0,n.useState)({}),g=async e=>{if(e.preventDefault(),(()=>{let e={};if(l.title.trim()||(e.title="Le titre est requis"),l.subject||(e.subject="La mati\xe8re est requise"),l.dueDate){let r=new Date(l.dueDate+"T23:59:59"),t=new Date;t.setHours(0,0,0,0),r<t&&(e.dueDate="L'\xe9ch\xe9ance ne peut pas \xeatre dans le pass\xe9")}else e.dueDate="L'\xe9ch\xe9ance est requise";return b(e),0===Object.keys(e).length})()&&!d){o(!0);try{let e=new Date(l.dueDate+"T23:59:59");await a({...l,dueDate:e}),i({title:"",description:"",subject:"",dueDate:"",priority:"medium"}),b({}),t()}catch(e){console.error("Erreur lors de la cr\xe9ation du devoir:",e)}finally{o(!1)}}},u=()=>{i({title:"",description:"",subject:"",dueDate:"",priority:"medium"}),b({}),t()};return r?(0,s.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/20 flex items-center justify-center z-50 p-4",onClick:u,children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl border border-gray-100 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-white relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/5"}),(0,s.jsxs)("div",{className:"relative z-10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:(0,s.jsx)(v.A,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Cr\xe9er un devoir"}),(0,s.jsx)("p",{className:"text-white/80 text-sm",children:"Ajoutez un nouveau travail \xe0 faire"})]})]}),(0,s.jsx)("button",{onClick:u,className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:(0,s.jsx)(j.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("div",{className:"absolute -bottom-6 -right-6 w-20 h-20 bg-white/10 rounded-full"}),(0,s.jsx)("div",{className:"absolute -top-3 -left-3 w-16 h-16 bg-white/5 rounded-full"})]}),(0,s.jsxs)("form",{onSubmit:g,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-blue-500"}),(0,s.jsx)("span",{children:"Titre du devoir *"})]}),(0,s.jsx)("input",{type:"text",value:l.title,onChange:e=>i({...l,title:e.target.value}),className:"w-full px-4 py-3 border-2 rounded-xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-200 text-gray-500 ".concat(c.title?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"),placeholder:"Ex: Exercices de math\xe9matiques chapitre 5"}),c.title&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[(0,s.jsx)("span",{children:"⚠️"}),(0,s.jsx)("span",{children:c.title})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)(v.A,{className:"h-4 w-4 text-purple-500"}),(0,s.jsx)("span",{children:"Mati\xe8re *"})]}),(0,s.jsxs)("select",{value:l.subject,onChange:e=>i({...l,subject:e.target.value}),className:"w-full px-4 py-3 border-2 rounded-xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 transition-all duration-200 text-gray-900 ".concat(c.subject?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsx)("option",{value:"",children:"Choisir une mati\xe8re"}),N.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),c.subject&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[(0,s.jsx)("span",{children:"⚠️"}),(0,s.jsx)("span",{children:c.subject})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)(y,{className:"h-4 w-4 text-orange-500"}),(0,s.jsx)("span",{children:"Priorit\xe9"})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:k.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>i({...l,priority:e.value}),className:"p-3 border-2 rounded-xl text-xs font-semibold transition-all duration-200 ".concat(l.priority===e.value?e.color+" scale-105":"border-gray-200 text-gray-600 hover:border-gray-300"),children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,s.jsx)("span",{className:"text-lg",children:e.icon}),(0,s.jsx)("span",{children:e.label})]})},e.value))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)("span",{children:"Date d'\xe9ch\xe9ance *"})]}),(0,s.jsx)("input",{type:"date",value:l.dueDate.split("T")[0],onChange:e=>i({...l,dueDate:e.target.value}),className:"w-full px-4 py-3 border-2 rounded-xl focus:ring-4 focus:ring-green-500/20 focus:border-green-500 transition-all duration-200 text-gray-500 ".concat(c.dueDate?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300"),min:new Date().toISOString().slice(0,10)}),c.dueDate&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center space-x-1",children:[(0,s.jsx)("span",{children:"⚠️"}),(0,s.jsx)("span",{children:c.dueDate})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-indigo-500"}),(0,s.jsx)("span",{children:"Description (optionnel)"})]}),(0,s.jsx)("textarea",{value:l.description,onChange:e=>i({...l,description:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 hover:border-gray-300 transition-all duration-200 resize-none text-gray-500",placeholder:"D\xe9crivez les d\xe9tails du devoir, les consignes particuli\xe8res...",rows:4})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-100",children:[(0,s.jsx)("button",{type:"button",onClick:u,className:"px-6 py-3 text-gray-600 hover:text-gray-800 font-semibold transition-colors rounded-xl hover:bg-gray-50",disabled:d,children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:d||!l.title||!l.subject||!l.dueDate,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:cursor-not-allowed",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,s.jsx)("span",{children:"Cr\xe9ation..."})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{children:"Ajouter"})})})]})]})]})}):null}function A(){let{user:e,logout:r}=(0,a.A)(),t=(null==e?void 0:e.role)==="personal"?"Mes T\xe2ches":"Mes Devoirs",x=(null==e?void 0:e.role)==="personal"?"Organisez et suivez vos t\xe2ches personnelles et projets":"Organisez vos devoirs et suivez votre progression",v=(null==e?void 0:e.role)==="personal"?"Nouvelle t\xe2che":"Nouveau devoir",{assignments:j,updateAssignment:f,createAssignment:y}=(0,d.K)((null==e?void 0:e.id)||""),[w,N]=(0,n.useState)(!1),[k,A]=(0,n.useState)([]),[L,S]=(0,n.useState)(new Map);if((0,n.useEffect)(()=>{A(j.map(e=>{let r=L.get(e.id);return r||e}))},[j,L]),(0,n.useEffect)(()=>{if(L.size>0){let e=setTimeout(async()=>{let e=new Map(L);S(new Map);try{await Promise.all(Array.from(e.values()).map(e=>f(e).catch(r=>console.error("Erreur sync:",e.id,r))))}catch(r){console.error("Erreur lors de la synchronisation:",r),S(r=>new Map([...r,...e]))}},1e3);return()=>clearTimeout(e)}},[L,f]),e||(0,l.redirect)("/"),"admin"===e.role)return(0,s.jsx)(i.A,{user:e,onLogout:r,children:(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:t}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"G\xe9rez les devoirs de tous les \xe9tudiants et cr\xe9ez de nouvelles t\xe2ches."}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Fonctionnalit\xe9s pr\xe9vues : attribution de devoirs, suivi des rendus, \xe9valuations..."})]})]})})});let T=async e=>{await y({title:e.title,description:e.description,subject:e.subject,dueDate:e.dueDate,priority:e.priority,completed:!1})},E=async e=>{window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce devoir ?")&&console.log("Suppression du devoir:",e)},C=e=>{let r=new Date;return Math.ceil((e.getTime()-r.getTime())/864e5)};return(0,s.jsx)(i.A,{user:e,onLogout:r,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),(0,s.jsx)("p",{className:"text-gray-600",children:x})]}),(0,s.jsxs)("button",{onClick:()=>N(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:v})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white border-2 border-blue-200 rounded-2xl p-6 relative overflow-hidden hover:border-blue-300 transition-all duration-200",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 bg-blue-100 rounded-bl-full opacity-50"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(u.A,{className:"h-6 w-6 text-blue-600"})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("p",{className:"text-4xl font-black text-gray-900",children:k.length})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-100 pt-3",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-gray-800 uppercase tracking-wide",children:"Total"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Toutes les t\xe2ches"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white border-2 border-green-200 rounded-2xl p-6 relative overflow-hidden hover:border-green-300 transition-all duration-200",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 bg-green-100 rounded-bl-full opacity-50"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"h-6 w-6 text-green-600"})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("p",{className:"text-4xl font-black text-gray-900",children:k.filter(e=>e.completed).length})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-100 pt-3",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-gray-800 uppercase tracking-wide",children:"Termin\xe9es"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Objectifs atteints"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white border-2 border-orange-200 rounded-2xl p-6 relative overflow-hidden hover:border-orange-300 transition-all duration-200",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 bg-orange-100 rounded-bl-full opacity-50"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(b.A,{className:"h-6 w-6 text-orange-600"})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("p",{className:"text-4xl font-black text-gray-900",children:k.filter(e=>!e.completed&&C(e.dueDate)>=0).length})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-100 pt-3",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-gray-800 uppercase tracking-wide",children:"En cours"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\xc0 compl\xe9ter"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white border-2 border-red-200 rounded-2xl p-6 relative overflow-hidden hover:border-red-300 transition-all duration-200",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 bg-red-100 rounded-bl-full opacity-50"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(c.A,{className:"h-6 w-6 text-red-600"})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("p",{className:"text-4xl font-black text-gray-900",children:k.filter(e=>!e.completed&&0>C(e.dueDate)).length})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-100 pt-3",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-gray-800 uppercase tracking-wide",children:"En retard"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xe9cessitent attention"})]})]})]})]}),(0,s.jsx)("div",{className:"space-y-6",children:0===k.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Aucune t\xe2che pour le moment"})}):k.map(e=>{let r=0>C(e.dueDate),t=(0,p.$f)(e.subject);return(0,s.jsxs)("div",{className:"group relative bg-white rounded-3xl shadow-sm transition-all duration-300 hover:shadow-xl hover:-translate-y-2 transform ".concat(e.completed?"border-l-4 border-green-400 bg-green-50/20":r?"border-l-4 border-red-400 bg-red-50/20":"border-l-4 border-blue-400 hover:border-blue-500"),style:{boxShadow:e.completed?"0 8px 25px rgba(34, 197, 94, 0.15), 0 0 0 1px rgba(34, 197, 94, 0.05)":r?"0 8px 25px rgba(239, 68, 68, 0.15), 0 0 0 1px rgba(239, 68, 68, 0.05)":"0 8px 25px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(0, 0, 0, 0.02)"},children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-0 h-0 border-l-[20px] border-b-[20px] ".concat("high"===e.priority?"border-l-red-500 border-b-transparent":"medium"===e.priority?"border-l-orange-500 border-b-transparent":"border-l-green-500 border-b-transparent"," rounded-tr-3xl")}),(0,s.jsxs)("div",{className:"p-6 pl-8",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,s.jsx)("button",{onClick:()=>(e=>{let r=k.find(r=>r.id===e);if(!r)return;let t={...r,completed:!r.completed};A(r=>r.map(r=>r.id===e?t:r)),S(r=>{let s=new Map(r);return s.set(e,t),s})})(e.id),className:"group/checkbox flex-shrink-0 transition-all duration-300 hover:scale-110",children:e.completed?(0,s.jsx)("div",{className:"relative h-8 w-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg border-2 border-white group-hover/checkbox:shadow-xl transition-all duration-300",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):(0,s.jsx)("div",{className:"h-8 w-8 border-3 border-gray-300 rounded-full hover:border-blue-500 transition-all duration-300 group-hover/checkbox:bg-blue-50 group-hover/checkbox:border-blue-400"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("h3",{className:"text-xl font-bold transition-all duration-200 ".concat(e.completed?"text-green-700 line-through":"text-gray-900 group-hover:text-blue-900"),children:e.title})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4 ml-11",children:[(0,s.jsx)("span",{className:"px-3 py-1.5 rounded-xl text-sm font-semibold ".concat(t.backgroundLight," ").concat(t.text," border border-current/20"),children:e.subject}),(0,s.jsxs)("span",{className:"px-3 py-1.5 rounded-xl text-sm font-semibold border ".concat("high"===e.priority?"bg-red-50 text-red-700 border-red-200":"medium"===e.priority?"bg-orange-50 text-orange-700 border-orange-200":"bg-green-50 text-green-700 border-green-200"),children:["Priorit\xe9 ","high"===e.priority?"haute":"medium"===e.priority?"moyenne":"basse"]})]})]}),(0,s.jsxs)("div",{className:"ml-11",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-4 leading-relaxed ".concat(e.completed?"text-gray-500":""),children:e.description}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Progression"}),(0,s.jsxs)("span",{className:"text-sm font-black px-3 py-1 rounded-full border-2 ".concat(e.completed?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-800 border-gray-200"),children:[100*!!e.completed,"%"]})]}),(0,s.jsx)("div",{className:"relative w-full bg-gray-100 rounded-full h-4 overflow-hidden border border-gray-200",children:(0,s.jsx)("div",{className:"h-4 rounded-full transition-all duration-700 ease-out relative ".concat(e.completed?"bg-green-500":r?"bg-red-500":"bg-blue-500"),style:{width:"".concat(100*!!e.completed,"%")},children:e.completed&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-white/20 rounded-full"})})})]})]})]}),(0,s.jsxs)("div",{className:"text-right ml-6 flex flex-col items-end",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,s.jsx)("div",{className:"p-2 rounded-xl ".concat(e.completed?"bg-green-100":r?"bg-red-100":"bg-blue-100"),children:(e=>{if(e.completed)return(0,s.jsx)(o.A,{className:"h-5 w-5 text-green-500"});let r=C(e.dueDate);return r<0?(0,s.jsx)(c.A,{className:"h-5 w-5 text-red-500"}):r<=1?(0,s.jsx)(c.A,{className:"h-5 w-5 text-orange-500"}):(0,s.jsx)(b.A,{className:"h-5 w-5 text-blue-500"})})(e)})}),(0,s.jsx)("span",{className:"text-sm font-semibold px-3 py-1 rounded-full ".concat(e.completed?"bg-green-100 text-green-800":r?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:(e=>{if(e.completed)return"Juste t\xe2che";let r=C(e.dueDate);return r<0?"En retard":r<=1?"Urgent":"En cours"})(e)}),(0,s.jsx)("div",{className:"text-sm font-medium mt-2 ".concat(r?"text-red-600":"text-gray-600"),children:(e=>{let r=new Date,t=new Date(r);if(t.setDate(t.getDate()+1),e.toDateString()===r.toDateString())return"Aujourd'hui";{if(e.toDateString()===t.toDateString())return"Demain";let s=Math.ceil((e.getTime()-r.getTime())/864e5);return s>0&&s<=7?"Dans ".concat(s," jours"):s<0?"En retard de ".concat(Math.abs(s)," jours"):e.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}})(e.dueDate)}),(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.dueDate.toLocaleDateString("fr-FR")})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-100/50",children:[(0,s.jsxs)("button",{onClick:()=>{console.log("\xc9dition du devoir:",e.id)},className:"flex items-center space-x-2 px-5 py-3 text-sm font-bold text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-2xl transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 border border-blue-200 hover:border-blue-300",children:[(0,s.jsx)(m,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Modifier"})]}),(0,s.jsxs)("button",{onClick:()=>E(e.id),className:"flex items-center space-x-2 px-5 py-3 text-sm font-bold text-red-700 bg-red-50 hover:bg-red-100 rounded-2xl transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 border border-red-200 hover:border-red-300",children:[(0,s.jsx)(h.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Supprimer"})]})]})]})]},e.id)})})]}),(0,s.jsx)(D,{isOpen:w,onClose:()=>N(!1),onSubmit:T})]})})}},2525:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},3109:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},4616:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7709:(e,r,t)=>{"use strict";t.d(r,{$f:()=>d,Fg:()=>i,Ho:()=>n,O6:()=>o,XA:()=>c});let s={course:{background:"bg-blue-700",backgroundLight:"bg-blue-200",border:"border-l-blue-700",borderLight:"border-l-blue-500",text:"text-blue-700",ring:"ring-blue-500"},practical:{background:"bg-emerald-700",backgroundLight:"bg-emerald-200",border:"border-l-emerald-700",borderLight:"border-l-emerald-500",text:"text-emerald-700",ring:"ring-emerald-500"},exam:{background:"bg-rose-600",backgroundLight:"bg-rose-100",border:"border-l-rose-600",borderLight:"border-l-rose-400",text:"text-rose-600",ring:"ring-rose-400"},project:{background:"bg-teal-700",backgroundLight:"bg-teal-200",border:"border-l-teal-700",borderLight:"border-l-teal-500",text:"text-teal-700",ring:"ring-teal-500"},sport:{background:"bg-indigo-700",backgroundLight:"bg-indigo-200",border:"border-l-indigo-700",borderLight:"border-l-indigo-500",text:"text-indigo-700",ring:"ring-indigo-500"},study:{background:"bg-purple-700",backgroundLight:"bg-purple-200",border:"border-l-purple-700",borderLight:"border-l-purple-500",text:"text-purple-700",ring:"ring-purple-500"}},a={high:{background:"bg-rose-600",backgroundLight:"bg-rose-100",border:"border-l-rose-600",borderLight:"border-l-rose-400",text:"text-rose-600",ring:"ring-rose-400"},medium:{background:"bg-orange-600",backgroundLight:"bg-orange-100",border:"border-l-orange-600",borderLight:"border-l-orange-400",text:"text-orange-600",ring:"ring-orange-400"},low:{background:"bg-emerald-700",backgroundLight:"bg-emerald-200",border:"border-l-emerald-700",borderLight:"border-l-emerald-500",text:"text-emerald-700",ring:"ring-emerald-500"}},l={Mathématiques:{background:"bg-blue-700",backgroundLight:"bg-blue-100",border:"border-l-blue-700",borderLight:"border-l-blue-500",text:"text-blue-700",ring:"ring-blue-500"},"Physique-Chimie":{background:"bg-indigo-700",backgroundLight:"bg-indigo-100",border:"border-l-indigo-700",borderLight:"border-l-indigo-500",text:"text-indigo-700",ring:"ring-indigo-500"},SVT:{background:"bg-emerald-700",backgroundLight:"bg-emerald-100",border:"border-l-emerald-700",borderLight:"border-l-emerald-500",text:"text-emerald-700",ring:"ring-emerald-500"},Sciences:{background:"bg-teal-700",backgroundLight:"bg-teal-100",border:"border-l-teal-700",borderLight:"border-l-teal-500",text:"text-teal-700",ring:"ring-teal-500"},Français:{background:"bg-purple-700",backgroundLight:"bg-purple-100",border:"border-l-purple-700",borderLight:"border-l-purple-500",text:"text-purple-700",ring:"ring-purple-500"},Anglais:{background:"bg-rose-600",backgroundLight:"bg-rose-100",border:"border-l-rose-600",borderLight:"border-l-rose-400",text:"text-rose-600",ring:"ring-rose-400"},Espagnol:{background:"bg-red-600",backgroundLight:"bg-red-100",border:"border-l-red-600",borderLight:"border-l-red-400",text:"text-red-600",ring:"ring-red-400"},Allemand:{background:"bg-slate-700",backgroundLight:"bg-slate-100",border:"border-l-slate-700",borderLight:"border-l-slate-500",text:"text-slate-700",ring:"ring-slate-500"},"Histoire-G\xe9ographie":{background:"bg-amber-700",backgroundLight:"bg-amber-100",border:"border-l-amber-700",borderLight:"border-l-amber-500",text:"text-amber-700",ring:"ring-amber-500"},Histoire:{background:"bg-yellow-700",backgroundLight:"bg-yellow-100",border:"border-l-yellow-700",borderLight:"border-l-yellow-500",text:"text-yellow-700",ring:"ring-yellow-500"},Géographie:{background:"bg-lime-700",backgroundLight:"bg-lime-100",border:"border-l-lime-700",borderLight:"border-l-lime-500",text:"text-lime-700",ring:"ring-lime-500"},Philosophie:{background:"bg-violet-700",backgroundLight:"bg-violet-100",border:"border-l-violet-700",borderLight:"border-l-violet-500",text:"text-violet-700",ring:"ring-violet-500"},EPS:{background:"bg-green-700",backgroundLight:"bg-green-100",border:"border-l-green-700",borderLight:"border-l-green-500",text:"text-green-700",ring:"ring-green-500"},"Arts plastiques":{background:"bg-pink-600",backgroundLight:"bg-pink-100",border:"border-l-pink-600",borderLight:"border-l-pink-400",text:"text-pink-600",ring:"ring-pink-400"},Musique:{background:"bg-fuchsia-600",backgroundLight:"bg-fuchsia-100",border:"border-l-fuchsia-600",borderLight:"border-l-fuchsia-400",text:"text-fuchsia-600",ring:"ring-fuchsia-400"},Technologie:{background:"bg-gray-700",backgroundLight:"bg-gray-100",border:"border-l-gray-700",borderLight:"border-l-gray-500",text:"text-gray-700",ring:"ring-gray-500"},Économie:{background:"bg-cyan-700",backgroundLight:"bg-cyan-100",border:"border-l-cyan-700",borderLight:"border-l-cyan-500",text:"text-cyan-700",ring:"ring-cyan-500"},Informatique:{background:"bg-sky-700",backgroundLight:"bg-sky-100",border:"border-l-sky-700",borderLight:"border-l-sky-500",text:"text-sky-700",ring:"ring-sky-500"}},i=e=>s[e]||s.course,n=e=>a[e]||a.medium,d=e=>l[e]||s.course,o=(e,r,t)=>"assignment"===e&&r?n(r):"exam"===e?i(e):("course"===e||"practical"===e)&&t?d(t):i(e),c=e=>i(e).background},7872:(e,r,t)=>{Promise.resolve().then(t.bind(t,1852))},8061:(e,r,t)=>{"use strict";t.d(r,{K:()=>a});var s=t(2115);function a(e){let[r,t]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[i,n]=(0,s.useState)(!0),[d,o]=(0,s.useState)(!1),[c,b]=(0,s.useState)(!0),[g,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),h=(0,s.useCallback)(async()=>{if(e)try{n(!0),m(null);let[r,s]=await Promise.all([fetch("/api/events?userId=".concat(e)),fetch("/api/assignments?userId=".concat(e))]),a=await r.json(),i=await s.json();if(a.success){let e=a.events.map(e=>({...e,startTime:new Date(e.startTime),endTime:new Date(e.endTime),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));l(e)}if(i.success){let e=i.assignments.map(e=>({...e,dueDate:new Date(e.dueDate),createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));t(e)}b(!0)}catch(e){m(e instanceof Error?e.message:"Erreur lors du chargement des donn\xe9es"),b(!1)}finally{n(!1)}},[e]),p=(0,s.useCallback)(async()=>{if(!d)try{o(!0),m(null),await new Promise(e=>setTimeout(e,1e3)),u(new Date),b(!0),console.log("✅ Synchronisation simul\xe9e r\xe9ussie")}catch(e){m(e instanceof Error?e.message:"Erreur de synchronisation"),b(!1)}finally{o(!1)}},[d]),v=(0,s.useCallback)(async r=>{if(e)try{var s;let a=await fetch("/api/assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,userId:e,dueDate:null==(s=r.dueDate)?void 0:s.toISOString()})}),l=await a.json();if(l.success){let e={...l.assignment,dueDate:new Date(l.assignment.dueDate),createdAt:new Date(l.assignment.createdAt),updatedAt:new Date(l.assignment.updatedAt)};t(r=>[...r,e]),console.log("\uD83D\uDCDD Nouveau devoir cr\xe9\xe9:",e.title)}else throw Error(l.error)}catch(e){m(e instanceof Error?e.message:"Erreur cr\xe9ation devoir")}},[e]),j=(0,s.useCallback)(async e=>{try{let r=await fetch("/api/assignments/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,dueDate:e.dueDate.toISOString()})}),s=await r.json();if(s.success){let r={...s.assignment,dueDate:new Date(s.assignment.dueDate),createdAt:new Date(s.assignment.createdAt),updatedAt:new Date(s.assignment.updatedAt)};t(t=>t.map(t=>t.id===e.id?r:t)),console.log("✏️ Devoir mis \xe0 jour:",e.title)}else throw Error(s.error)}catch(e){m(e instanceof Error?e.message:"Erreur mise \xe0 jour devoir")}},[]),f=(0,s.useCallback)(async e=>{try{let r=await fetch("/api/assignments/".concat(e),{method:"DELETE"}),s=await r.json();if(s.success)t(r=>r.filter(r=>r.id!==e)),console.log("\uD83D\uDDD1️ Devoir supprim\xe9");else throw Error(s.error)}catch(e){m(e instanceof Error?e.message:"Erreur suppression devoir")}},[]),y=(0,s.useCallback)(async r=>{if(e)try{var t,s;let a=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,userId:e,startTime:null==(t=r.startTime)?void 0:t.toISOString(),endTime:null==(s=r.endTime)?void 0:s.toISOString()})}),i=await a.json();if(i.success){let e={...i.event,startTime:new Date(i.event.startTime),endTime:new Date(i.event.endTime),createdAt:new Date(i.event.createdAt),updatedAt:new Date(i.event.updatedAt)};l(r=>[...r,e]),console.log("\uD83D\uDCC5 Nouvel \xe9v\xe9nement cr\xe9\xe9:",e.title)}else throw Error(i.error)}catch(e){m(e instanceof Error?e.message:"Erreur cr\xe9ation \xe9v\xe9nement")}},[e]),w=(0,s.useCallback)(async e=>{try{let r=await fetch("/api/events/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,startTime:e.startTime.toISOString(),endTime:e.endTime.toISOString()})}),t=await r.json();if(t.success){let r={...t.event,startTime:new Date(t.event.startTime),endTime:new Date(t.event.endTime),createdAt:new Date(t.event.createdAt),updatedAt:new Date(t.event.updatedAt)};l(t=>t.map(t=>t.id===e.id?r:t)),console.log("\uD83D\uDCDD \xc9v\xe9nement mis \xe0 jour:",e.title)}else throw Error(t.error)}catch(e){m(e instanceof Error?e.message:"Erreur mise \xe0 jour \xe9v\xe9nement")}},[]),N=(0,s.useCallback)(async e=>{try{let r=await fetch("/api/events/".concat(e),{method:"DELETE"}),t=await r.json();if(t.success)l(r=>r.filter(r=>r.id!==e)),console.log("\uD83D\uDDD1️ \xc9v\xe9nement supprim\xe9");else throw Error(t.error)}catch(e){m(e instanceof Error?e.message:"Erreur suppression \xe9v\xe9nement")}},[]),k=(0,s.useCallback)(async()=>{await h()},[h]);return(0,s.useEffect)(()=>{h()},[h]),(0,s.useEffect)(()=>{if(c&&!d){let e=setTimeout(()=>{p()},5e3);return()=>clearTimeout(e)}},[c,d,p]),{assignments:r,events:a,loading:i,syncing:d,isOnline:c,lastSync:g,error:x,createAssignment:v,updateAssignment:j,deleteAssignment:f,createEvent:y,updateEvent:w,deleteEvent:N,syncNow:p,refreshData:k}}}},e=>{e.O(0,[898,824,441,964,358],()=>e(e.s=7872)),_N_E=e.O()}]);