(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{1180:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(5155),l=s(9576),a=s(5695),i=s(9824),d=s(2115),n=s(8061),o=s(4616),c=s(6785),u=s(646),x=s(3109),m=s(5339),h=s(6932),b=s(9946);let p=(0,b.A)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);var g=s(2846),j=s(7650),v=s(4416);let y=["Math\xe9matiques","Physique-Chimie","SVT","Sciences","Fran\xe7ais","Anglais","Espagnol","Allemand","Histoire-G\xe9ographie","Histoire","G\xe9ographie","Philosophie","EPS","Arts plastiques","Musique","Technologie","\xc9conomie","Informatique"];function f(e){let{isOpen:t,onClose:s,onSubmit:l}=e,[a,i]=(0,d.useState)({title:"",description:"",subject:"",dueDate:"",priority:"medium"}),[n,o]=(0,d.useState)(!1),[c,u]=(0,d.useState)({}),[x,m]=(0,d.useState)(!1),h=async e=>{if(e.preventDefault(),(()=>{let e={};if(a.title.trim()||(e.title="Le titre est requis"),a.subject||(e.subject="La mati\xe8re est requise"),a.dueDate){let t=new Date(a.dueDate+"T23:59:59"),s=new Date;s.setHours(0,0,0,0),t<s&&(e.dueDate="L'\xe9ch\xe9ance ne peut pas \xeatre dans le pass\xe9")}else e.dueDate="L'\xe9ch\xe9ance est requise";return u(e),0===Object.keys(e).length})()&&!n){o(!0);try{let e=new Date(a.dueDate+"T23:59:59");await l({...a,dueDate:e}),i({title:"",description:"",subject:"",dueDate:"",priority:"medium"}),u({}),s()}catch(e){console.error("Erreur lors de la cr\xe9ation du devoir:",e)}finally{o(!1)}}},b=()=>{i({title:"",description:"",subject:"",dueDate:"",priority:"medium"}),u({}),s()};if((0,d.useEffect)(()=>(m(!0),t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t||!x)return null;let p=(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",style:{backdropFilter:"blur(4px)"},children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-black",children:"Nouveau devoir"}),(0,r.jsx)("button",{onClick:b,className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)(v.A,{className:"h-5 w-5"})})]}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Titre du devoir *"}),(0,r.jsx)("input",{type:"text",value:a.title,onChange:e=>i({...a,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-black focus:outline-none focus:border-blue-500 ".concat(c.title?"border-red-300 bg-red-50":""),placeholder:"Ex: Exercices de math\xe9matiques chapitre 5",autoFocus:!0}),c.title&&(0,r.jsx)("p",{className:"mt-2 text-sm text-red-600",children:c.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Mati\xe8re *"}),(0,r.jsxs)("select",{value:a.subject,onChange:e=>i({...a,subject:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-black focus:outline-none focus:border-blue-500 ".concat(c.subject?"border-red-300 bg-red-50":""),children:[(0,r.jsx)("option",{value:"",children:"S\xe9lectionnez une mati\xe8re"}),y.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),c.subject&&(0,r.jsx)("p",{className:"mt-2 text-sm text-red-600",children:c.subject})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Niveau de priorit\xe9"}),(0,r.jsxs)("select",{value:a.priority,onChange:e=>i({...a,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-black focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"low",children:"Faible"}),(0,r.jsx)("option",{value:"medium",children:"Normale"}),(0,r.jsx)("option",{value:"high",children:"Urgente"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Date d'\xe9ch\xe9ance *"}),(0,r.jsx)("input",{type:"date",value:a.dueDate.split("T")[0],onChange:e=>i({...a,dueDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-black focus:outline-none focus:border-blue-500 ".concat(c.dueDate?"border-red-300 bg-red-50":""),min:new Date().toISOString().slice(0,10)}),c.dueDate&&(0,r.jsx)("p",{className:"mt-2 text-sm text-red-600",children:c.dueDate})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black mb-2",children:"Description (optionnel)"}),(0,r.jsx)("textarea",{value:a.description,onChange:e=>i({...a,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-black focus:outline-none focus:border-blue-500 resize-none",placeholder:"D\xe9crivez les d\xe9tails de ce devoir...",rows:3})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:n,children:"Annuler"}),(0,r.jsx)("button",{type:"submit",disabled:n||!a.title||!a.subject||!a.dueDate,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"Cr\xe9ation...":"Cr\xe9er"})]})]})]})});return(0,j.createPortal)(p,document.body)}var N=s(9074);let w=(0,b.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var k=s(2525),D=s(7709);let A=(0,d.memo)(e=>{let{assignment:t,onToggleCompletion:s,onEdit:l,onDelete:a}=e,i=(0,g.Jv)(t.dueDate),d=(0,D.$f)(t.subject);return(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-lg transition-all duration-200 group ".concat(t.completed?"border-l-4 border-l-green-500":i?"border-l-4 border-l-red-500":"border-l-4 border-l-blue-500"),children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("button",{onClick:()=>s(t.id),className:"flex-shrink-0 mt-0.5 transition-all duration-200 hover:scale-105",children:t.completed?(0,r.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"h-4 w-4 text-white"})}):(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-gray-300 rounded-full hover:border-blue-500 transition-colors"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2 ".concat(t.completed?"line-through text-gray-500":""),children:t.title}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(d.backgroundLight," ").concat(d.text),children:t.subject}),(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("high"===t.priority?"bg-red-100 text-red-800":"medium"===t.priority?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"),children:"high"===t.priority?"Urgent":"medium"===t.priority?"Normal":"Faible"})]})]})]}),t.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2 ".concat(t.completed?"text-gray-500":""),children:t.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(N.A,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{className:"".concat(i?"text-red-600":"text-gray-600"),children:(0,g.ak)(t.dueDate)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(e=>{if(e.completed)return(0,r.jsx)(u.A,{className:"h-5 w-5 text-green-500"});let t=(0,g.WU)(e.dueDate);return t<0?(0,r.jsx)(m.A,{className:"h-5 w-5 text-red-500"}):t<=1?(0,r.jsx)(m.A,{className:"h-5 w-5 text-orange-500"}):(0,r.jsx)(x.A,{className:"h-5 w-5 text-blue-500"})})(t),(0,r.jsx)("span",{className:"text-xs font-medium ".concat(t.completed?"text-green-600":i?"text-red-600":"text-blue-600"),children:(e=>{if(e.completed)return"Termin\xe9e";let t=(0,g.WU)(e.dueDate);return t<0?"En retard":t<=1?"Urgent":"En cours"})(t)})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[(0,r.jsx)("span",{children:"Progression"}),(0,r.jsx)("span",{className:"font-medium",children:t.completed?"100%":"0%"})]}),(0,r.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(t.completed?"bg-green-500":i?"bg-red-500":"bg-blue-500"),style:{width:t.completed?"100%":"0%"}})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-4 border-t border-gray-100",children:[(0,r.jsx)("button",{onClick:()=>l(t),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,r.jsx)(w,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>a(t.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,r.jsx)(k.A,{className:"h-4 w-4"})})]})]})});function C(){let{user:e,logout:t}=(0,l.A)(),s=(null==e?void 0:e.role)==="personal"?"Mes T\xe2ches":"Mes Devoirs",b=(null==e?void 0:e.role)==="personal"?"Organisez et suivez vos t\xe2ches personnelles et projets":"Organisez vos devoirs et suivez votre progression",j=(null==e?void 0:e.role)==="personal"?"Nouvelle t\xe2che":"Nouveau devoir",{assignments:v,updateAssignment:y,createAssignment:N}=(0,n.K)((null==e?void 0:e.id)||""),[w,k]=(0,d.useState)(!1),[D,C]=(0,d.useState)([]),[M,E]=(0,d.useState)(new Map),[T,S]=(0,d.useState)("all"),[z,q]=(0,d.useState)("dueDate");(0,d.useEffect)(()=>{C(v.map(e=>{let t=M.get(e.id);return t||e}))},[v,M]);let U=(0,d.useMemo)(()=>D.filter(e=>{switch(T){case"pending":return!e.completed&&(0,g.WU)(e.dueDate)>=0;case"completed":return e.completed;case"overdue":return!e.completed&&0>(0,g.WU)(e.dueDate);default:return!0}}).sort((e,t)=>{switch(z){case"dueDate":return new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime();case"priority":let s={high:3,medium:2,low:1};return s[t.priority]-s[e.priority];case"subject":return e.subject.localeCompare(t.subject);default:return 0}}),[D,T,z]),L=(0,d.useCallback)(async e=>{await N({title:e.title,description:e.description,subject:e.subject,dueDate:e.dueDate,priority:e.priority,completed:!1})},[N]),O=(0,d.useCallback)(e=>{console.log("\xc9dition du devoir:",e.id)},[]),P=(0,d.useCallback)(async e=>{window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce devoir ?")&&console.log("Suppression du devoir:",e)},[]),F=(0,d.useCallback)(e=>{let t=D.find(t=>t.id===e);if(!t)return;let s={...t,completed:!t.completed};C(t=>t.map(t=>t.id===e?s:t)),E(t=>{let r=new Map(t);return r.set(e,s),r})},[D]);return((0,d.useEffect)(()=>{if(M.size>0){let e=setTimeout(async()=>{let e=new Map(M);E(new Map);try{await Promise.all(Array.from(e.values()).map(e=>y(e).catch(t=>console.error("Erreur sync:",e.id,t))))}catch(t){console.error("Erreur lors de la synchronisation:",t),E(t=>new Map([...t,...e]))}},1e3);return()=>clearTimeout(e)}},[M,y]),e||(0,a.redirect)("/"),"admin"===e.role)?(0,r.jsx)(i.A,{user:e,onLogout:t,children:(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:s}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"G\xe9rez les devoirs de tous les \xe9tudiants et cr\xe9ez de nouvelles t\xe2ches."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Fonctionnalit\xe9s pr\xe9vues : attribution de devoirs, suivi des rendus, \xe9valuations..."})]})]})})}):(0,r.jsx)(i.A,{user:e,onLogout:t,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s}),(0,r.jsx)("p",{className:"text-gray-600",children:b})]}),(0,r.jsxs)("button",{onClick:()=>k(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:j})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.length}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Total des t\xe2ches"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"h-6 w-6 text-blue-600"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.filter(e=>e.completed).length}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Termin\xe9es"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"h-6 w-6 text-green-600"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.filter(e=>!e.completed&&(0,g.WU)(e.dueDate)>=0).length}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"En cours"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)(x.A,{className:"h-6 w-6 text-blue-600"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.filter(e=>!e.completed&&0>(0,g.WU)(e.dueDate)).length}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"En retard"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"h-6 w-6 text-red-600"})})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("select",{value:T,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"Toutes les t\xe2ches"}),(0,r.jsx)("option",{value:"pending",children:"En cours"}),(0,r.jsx)("option",{value:"completed",children:"Termin\xe9es"}),(0,r.jsx)("option",{value:"overdue",children:"En retard"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("select",{value:z,onChange:e=>q(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"dueDate",children:"Trier par \xe9ch\xe9ance"}),(0,r.jsx)("option",{value:"priority",children:"Trier par priorit\xe9"}),(0,r.jsx)("option",{value:"subject",children:"Trier par mati\xe8re"})]})]})]}),(0,r.jsx)("div",{className:"".concat(0===U.length?"text-center py-12":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"),children:0===U.length?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-xl flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(c.A,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"Aucune t\xe2che trouv\xe9e"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Essayez de modifier vos filtres ou cr\xe9ez une nouvelle t\xe2che"})]}):U.map(e=>(0,r.jsx)(A,{assignment:e,onToggleCompletion:F,onEdit:O,onDelete:P},e.id))})]}),(0,r.jsx)(f,{isOpen:w,onClose:()=>k(!1),onSubmit:L})]})})}A.displayName="AssignmentCard"},2525:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},3109:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7872:(e,t,s)=>{Promise.resolve().then(s.bind(s,1180))}},e=>{e.O(0,[393,824,444,441,964,358],()=>e(e.s=7872)),_N_E=e.O()}]);